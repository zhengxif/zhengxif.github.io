<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue核心概念及特性（一） | 学习笔记</title>
    <meta name="description" content="个人学习笔记">
    
    
    <link rel="preload" href="/assets/css/0.styles.86fd4520.css" as="style"><link rel="preload" href="/assets/js/app.2a43ed40.js" as="script"><link rel="preload" href="/assets/js/2.28999dec.js" as="script"><link rel="preload" href="/assets/js/3.91f2e5c8.js" as="script"><link rel="preload" href="/assets/js/4.f20431e4.js" as="script"><link rel="prefetch" href="/assets/js/10.f12bca7b.js"><link rel="prefetch" href="/assets/js/11.6dc3c24a.js"><link rel="prefetch" href="/assets/js/12.7bea5804.js"><link rel="prefetch" href="/assets/js/13.be80f112.js"><link rel="prefetch" href="/assets/js/14.422ca2d3.js"><link rel="prefetch" href="/assets/js/15.05f2d1fa.js"><link rel="prefetch" href="/assets/js/16.84821da4.js"><link rel="prefetch" href="/assets/js/17.e9a145e7.js"><link rel="prefetch" href="/assets/js/18.692454c6.js"><link rel="prefetch" href="/assets/js/19.b3b0b1e8.js"><link rel="prefetch" href="/assets/js/20.0175f529.js"><link rel="prefetch" href="/assets/js/21.d567d194.js"><link rel="prefetch" href="/assets/js/22.9b750a2c.js"><link rel="prefetch" href="/assets/js/23.ea088921.js"><link rel="prefetch" href="/assets/js/24.09953a15.js"><link rel="prefetch" href="/assets/js/25.a44889b6.js"><link rel="prefetch" href="/assets/js/26.6d0a6039.js"><link rel="prefetch" href="/assets/js/27.63851881.js"><link rel="prefetch" href="/assets/js/28.c0356274.js"><link rel="prefetch" href="/assets/js/29.71a1e235.js"><link rel="prefetch" href="/assets/js/30.cf4efccc.js"><link rel="prefetch" href="/assets/js/31.625769b2.js"><link rel="prefetch" href="/assets/js/5.e1aa82b6.js"><link rel="prefetch" href="/assets/js/6.7ef7e06f.js"><link rel="prefetch" href="/assets/js/7.5e77ac5e.js"><link rel="prefetch" href="/assets/js/8.c711e076.js"><link rel="prefetch" href="/assets/js/9.75701821.js">
    <link rel="stylesheet" href="/assets/css/0.styles.86fd4520.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">介绍</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JS相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/hf/" class="sidebar-link">高阶函数</a></li><li><a href="/js/currying/" class="sidebar-link">柯里化</a></li><li><a href="/js/on-emit/" class="sidebar-link">发布订阅与观察者模式</a></li><li><a href="/js/promise/" class="sidebar-link">Promise原理</a></li><li><a href="/js/ES6/" class="sidebar-link">ES6</a></li><li><a href="/js/data-structure/" class="sidebar-link">基本数据结构</a></li><li><a href="/js/call-apply-bind/" class="sidebar-link">call、apply、bind</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Node</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/node/event-loop/" class="sidebar-link">浏览器eventLoop</a></li><li><a href="/node/module/" class="sidebar-link">module</a></li><li><a href="/node/events/" class="sidebar-link">events(事件触发器)</a></li><li><a href="/node/buffer/" class="sidebar-link">Buffer</a></li><li><a href="/node/stream/" class="sidebar-link">stream(流)</a></li><li><a href="/node/fs/" class="sidebar-link">fs文件系统</a></li><li><a href="/node/http/" class="sidebar-link">http基础应用</a></li><li><a href="/node/koa/" class="sidebar-link">koa</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue/vue-base/" class="active sidebar-link">Vue核心概念及特性（一）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/vue-base/#一-vue的概念和特性" class="sidebar-link">一.Vue的概念和特性</a></li><li class="sidebar-sub-header"><a href="/vue/vue-base/#二-vue的基本使用" class="sidebar-link">二.Vue的基本使用</a></li><li class="sidebar-sub-header"><a href="/vue/vue-base/#三-vue中的指令" class="sidebar-link">三.Vue中的指令</a></li><li class="sidebar-sub-header"><a href="/vue/vue-base/#四-自定义指令" class="sidebar-link">四.自定义指令</a></li><li class="sidebar-sub-header"><a href="/vue/vue-base/#五-watch和computed" class="sidebar-link">五.watch和computed</a></li><li class="sidebar-sub-header"><a href="/vue/vue-base/#六-动画" class="sidebar-link">六.动画</a></li><li class="sidebar-sub-header"><a href="/vue/vue-base/#七-vue中的生命周期" class="sidebar-link">七.Vue中的生命周期</a></li></ul></li><li><a href="/vue/vue-component/" class="sidebar-link">Vue组件</a></li><li><a href="/vue/vuex/" class="sidebar-link">Vuex</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/react/react-introduce/" class="sidebar-link">React基本概况</a></li><li><a href="/react/react-hoc/" class="sidebar-link">高级用法</a></li><li><a href="/react/react-router/" class="sidebar-link">React路由</a></li><li><a href="/react/react-hooks/" class="sidebar-link">Hook</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue核心概念及特性（一）"><a href="#vue核心概念及特性（一）" aria-hidden="true" class="header-anchor">#</a> Vue核心概念及特性（一）</h1> <p>Vue是一套用于构建用户界面的渐进式框架。
特点：易用，灵活，高效，渐进式框架</p> <p><img src="/assets/img/vue.97ec2973.png" alt=""></p> <blockquote><p>可以随意组合需要用到的模块，vue + components + vue-router + vuex + vue-cli</p></blockquote> <h2 id="一-vue的概念和特性"><a href="#一-vue的概念和特性" aria-hidden="true" class="header-anchor">#</a> 一.Vue的概念和特性</h2> <h3 id="_1-什么是库，什么是框架？"><a href="#_1-什么是库，什么是框架？" aria-hidden="true" class="header-anchor">#</a> 1.什么是库，什么是框架？</h3> <ul><li>库是将代码集合成一个产品，库是我们调用库中的方法实现自己的功能。</li> <li>框架则是为解决一类问题而开发的产品，框架是我们在指定的位置编写好代码，框架帮我们调用。</li></ul> <p>框架和库最本质的区别在于控制权：you call libs，frameworks call you</p> <p><strong>Vue属于框架</strong></p> <h3 id="_2-mvc模型-mvvm模型"><a href="#_2-mvc模型-mvvm模型" aria-hidden="true" class="header-anchor">#</a> 2.MVC模型 &amp;&amp; MVVM模型</h3> <p><img src="/assets/img/process.691cd6e3.png" alt=""></p> <p>在传统的mvc中除了mode和view以外的逻辑都放在了controller中，导致controller逻辑复杂难以维护，在mvvm中view和model没有直接的关系，全部通过viewmodel进行交互</p> <p><strong>Vue是MVVM模式</strong></p> <h3 id="_3-声明式和命令式"><a href="#_3-声明式和命令式" aria-hidden="true" class="header-anchor">#</a> 3.声明式和命令式</h3> <ul><li>例如自己写个for循环就是命令式（命令式按照自己的方式得到结果）</li> <li>例如自己利用map循环就是声明式（我们想要的是循环，内部帮我们做了）</li></ul> <h2 id="二-vue的基本使用"><a href="#二-vue的基本使用" aria-hidden="true" class="header-anchor">#</a> 二.Vue的基本使用</h2> <h3 id="_1-mustache语法"><a href="#_1-mustache语法" aria-hidden="true" class="header-anchor">#</a> 1.mustache语法</h3> <p>允许开发者声明式地将DOM绑定至底层Vue实例的数据。在使用数据前需要先声明</p> <ul><li>编写三元表达式</li> <li>获取返回值</li> <li>javascript 表达式</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span> msg <span class="token operator">==</span> <span class="token string">'hello'</span> <span class="token operator">?</span> <span class="token string">'yes'</span> <span class="token punctuation">:</span> <span class="token string">'no'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'hello'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-响应式变化数据变化"><a href="#_2-响应式变化数据变化" aria-hidden="true" class="header-anchor">#</a> 2.响应式变化数据变化</h3> <p>Vue中使用Object.defineProperty()重新将对象中的属性定义，如果是数组的化需要重写数组原型上的方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'视图更新'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'zx'</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    arr<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// 重写数组的方法</span>
<span class="token keyword">let</span> oldProtoMethod <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
<span class="token keyword">let</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>oldProtoMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token string">'push'</span><span class="token punctuation">,</span> <span class="token string">'pop'</span><span class="token punctuation">,</span> <span class="token string">'shift'</span><span class="token punctuation">,</span> <span class="token string">'unshift'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">method</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    proto<span class="token punctuation">[</span>method<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> inserted<span class="token punctuation">;</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">'push'</span><span class="token punctuation">:</span>
            <span class="token keyword">case</span> <span class="token string">'unshift'</span><span class="token punctuation">:</span>
                inserted <span class="token operator">=</span> args<span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">observerArray</span><span class="token punctuation">(</span>inserted<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        oldProtoMethod<span class="token punctuation">[</span>method<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">observerArray</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 观察数组中的每一项</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> obj<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">observer</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">observer</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!=</span> <span class="token string">'object'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> proto<span class="token punctuation">;</span> <span class="token comment">// 重写数组上的方法</span>
        <span class="token function">observerArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">defineReactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">defineReactive</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">observer</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 递归添加响应式</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 不支持数组</span>
        <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>newValue <span class="token operator">!=</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">observer</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">observer</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'aa'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span>arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'bb'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>缺陷</strong></p> <ul><li>不能通过长度、索引改变数组</li> <li>不能给对象新增属性</li> <li>需要通过<code>vm.$set</code>和<code>vm.$delete</code>方法强制添加/删除响应式数据</li> <li>数组里套对象，对象是支持响应式变化的，如果是常量则没有效果</li></ul> <h2 id="三-vue中的指令"><a href="#三-vue中的指令" aria-hidden="true" class="header-anchor">#</a> 三.Vue中的指令</h2> <p>在vue中 指令（Directive）是带有 v- 前缀的特殊属性，主要的功能就是操作DOM</p> <h3 id="_1-v-once"><a href="#_1-v-once" aria-hidden="true" class="header-anchor">#</a> 1.v-once</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-once</span><span class="token punctuation">&gt;</span></span>{{state.count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_2-v-html"><a href="#_2-v-html" aria-hidden="true" class="header-anchor">#</a> 2.v-html</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_3-v-bind"><a href="#_3-v-bind" aria-hidden="true" class="header-anchor">#</a> 3.v-bind</h3> <p>动态绑定属性需要使用<code>v-bind</code>进行绑定</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><blockquote><p>可以用<code>:</code>来简写v-bind</p></blockquote> <h3 id="_4-v-for"><a href="#_4-v-for" aria-hidden="true" class="header-anchor">#</a> 4.v-for</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(fruit, index) in fruits<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>`item_${index}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{fruit}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>`item_${index}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{fruit}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>多个元素循环时外层需要增加<code>template</code>标签，需要给真实元素增加<code>key</code>，而且<code>key</code>不能重复，尽量不要采用索引作为<code>key</code>的值</p></blockquote> <p>举个<code>key</code>值的例子
<img src="/assets/img/k.20e5970b.png" alt=""></p> <h3 id="_5-v-if-v-else-v-show"><a href="#_5-v-if-v-else-v-show" aria-hidden="true" class="header-anchor">#</a> 5.v-if/v-else/v-show</h3> <p><code>v-if</code>可以切换<code>DOM</code>元素是否存在，并且<code>v-if</code>为<code>false</code>时内部指令不会被执行
<code>v-show</code>可以控制元素是否显示隐藏，主要控制的是元素的样式</p> <h3 id="_6-v-on"><a href="#_6-v-on" aria-hidden="true" class="header-anchor">#</a> 6.v-on</h3> <ul><li>事件的绑定</li> <li>事件修饰符（.stop .prevent）.capture .self .once .passive</li></ul> <h3 id="_7-v-model"><a href="#_7-v-model" aria-hidden="true" class="header-anchor">#</a> 7.v-model</h3> <p>双向数据绑定</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>select</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>fruit in fruits<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>fruit<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
    {{ fruit }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>radio</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>男<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>女<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>checkbox</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>check1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>香蕉<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>check1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>苹果<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>修饰符应用 .number .lazy .trim</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model.number</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="四-自定义指令"><a href="#四-自定义指令" aria-hidden="true" class="header-anchor">#</a> 四.自定义指令</h2> <ul><li>全局指令和局部指令</li> <li>编写一个自定义指令
<ul><li>钩子函数bind，inserted,update, 都包含参数el、bindings、vnode</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> v<span class="token operator">-</span>focus<span class="token punctuation">.</span>color<span class="token operator">=</span><span class="token string">&quot;'red'&quot;</span><span class="token operator">&gt;</span>
    Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'focus'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">inserted</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> bindings<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> color <span class="token operator">=</span> bindings<span class="token punctuation">.</span>modifiers<span class="token punctuation">.</span>color<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>boxShowdow <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">1px 1px 2px </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>bindings<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
            <span class="token punctuation">}</span>
            el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>clickoutside指令</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-click-outside</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@focus</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>flag=true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>flag<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            contenter
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
            data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                flag<span class="token punctuation">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            methds<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            directives<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                <span class="token string">'click-outside'</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>el<span class="token punctuation">.</span><span class="token function">container</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">let</span> eventName <span class="token operator">=</span> vnode<span class="token punctuation">.</span>expression<span class="token punctuation">;</span>
                            vnode<span class="token punctuation">.</span>context<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h2 id="五-watch和computed"><a href="#五-watch和computed" aria-hidden="true" class="header-anchor">#</a> 五.watch和computed</h2> <p>为什么总有面试问他们的区别？</p> <ul><li>watch和computed内部调用都是<code>new Wacth()</code>，基于<code>vm.$watch</code>实现，有时候可以实现相同的功能。</li> <li>watch每次监控到值变化后，都能执行相应的回调</li> <li>computed计算属性对此取值是用缓存数据，如果依赖的值变化，会重新执行</li> <li>computed内部用到了<code>Object.defineProperty()</code>的get/set</li></ul> <h3 id="_5-1-watch-监控"><a href="#_5-1-watch-监控" aria-hidden="true" class="header-anchor">#</a> 5.1 watch(监控)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 模拟</span>
<span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">'zx'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">initWatch</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> handle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    vm<span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">initWatch</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
vm<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'zz'</span><span class="token punctuation">;</span> <span class="token comment">// 数据变化执行对应的handle</span>
</code></pre></div><blockquote><p>当数据变化后，执行对应的处理函数</p></blockquote> <h3 id="_5-2-computed"><a href="#_5-2-computed" aria-hidden="true" class="header-anchor">#</a> 5.2 computed</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> dirty <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 内部有脏值检测系统</span>
<span class="token keyword">function</span> <span class="token function">initCompute</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> handle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>dirty<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 取值后将dirty变为false</span>
                value <span class="token operator">=</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">initCompute</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'取值一次'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> vm<span class="token punctuation">.</span>name<span class="token punctuation">;</span>    <span class="token comment">// 当前计算属性依赖于name属性</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取值一次</span>
consoel<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 没变化</span>
vm<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'aaa'</span><span class="token punctuation">;</span> <span class="token comment">// 当依赖的值变化 会将dirty重新改成true,保证获取最新值</span>
dirty <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'aaa'</span>
</code></pre></div><p>vue中通过<code>watcher</code>来实现脏值检测的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">initComputed</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 通过watcher来自动更新dirty的值</span>
    <span class="token keyword">let</span> watcher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> handleer<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> lazy<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>watcher<span class="token punctuation">.</span>dirty<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                value <span class="token operator">=</span> <span class="token function">handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                watcher<span class="token punctuation">.</span>dirty <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="六-动画"><a href="#六-动画" aria-hidden="true" class="header-anchor">#</a> 六.动画</h2> <p>元素的显示隐藏都可以增加动画效果<code>v-if</code>,<code>v-show</code>,<code>v-for</code>,路由切换等操作;</p> <p>常见的添加动画方式有<code>animation</code>,<code>transition</code>,<code>js编写动画</code></p> <h3 id="_6-1-css3动画"><a href="#_6-1-css3动画" aria-hidden="true" class="header-anchor">#</a> 6.1 css3动画</h3> <p><img src="/assets/img/transition.5990c1df.png" alt="">;</p> <p>每个样式的触发阶段</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>show()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>显示/隐藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.content</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span>10px<span class="token punctuation">;</span> <span class="token property">background</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.v-enter</span> <span class="token punctuation">{</span> <span class="token comment">/* 进入前 */</span>
    <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.v-enter</span> <span class="token punctuation">{</span> <span class="token comment">/* 进入前 */</span>
    <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.v-enter-active</span> <span class="token punctuation">{</span> <span class="token comment">/* 进入中 */</span>
    <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.v-enter-to</span> <span class="token punctuation">{</span> <span class="token comment">/* 目标 */</span>
    <span class="token property">background</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.v-leave</span> <span class="token punctuation">{</span> <span class="token comment">/* 开始离开 */</span>
    <span class="token property">background</span><span class="token punctuation">:</span> yeloow<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.v-leave-active</span> <span class="token punctuation">{</span> <span class="token comment">/* 离开中 */</span>
    <span class="token property">background</span><span class="token punctuation">:</span> yeloow<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.v-leave-to</span> <span class="token punctuation">{</span> <span class="token comment">/* 目标 */</span>
    <span class="token property">background</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>我们可以使用<code>name属性更改默认v-前缀</code></p></blockquote> <p><strong>配合<code>animate.css</code>使用</strong></p> <p>安装<code>animate.css</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> animate.css
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">&lt;link rel=&quot;stylesheet&quot; href=&quot;node_modules/animate.css/animate.css&quot;&gt;
&lt;style&gt;
    .content</span> <span class="token punctuation">{</span>
        <span class="token property">background</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.v-enter-active</span> <span class="token punctuation">{</span>
        <span class="token property">animation</span><span class="token punctuation">:</span>bounceIn 1s ease-in<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.v-leave-active</span> <span class="token punctuation">{</span>
        <span class="token property">animation</span><span class="token punctuation">:</span>bounceOut 1s ease-in<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
&lt;/style&gt;
</code></pre></div><p>也可以才用指定样式的方式</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">enter-active-class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bounceIn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">leave-active-class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bounceOut<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>content animated<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_6-2-js编写动画"><a href="#_6-2-js编写动画" aria-hidden="true" class="header-anchor">#</a> 6.2 js编写动画</h3> <p><strong>常用的钩子</strong></p> <ul><li>before-enter 触发enter之前</li> <li>before-leave 触发leave之前</li> <li>enter 进入动画过程</li> <li>leave 离开动画过程</li> <li>after-enter 进入动画结束</li> <li>after-leave 离开动画之后</li></ul> <p>添加购物车例子：<a href="https://github.com/zhengxif/vue-study/blob/master/example/addCart.html" target="_blank" rel="noopener noreferrer">https://github.com/zhengxif/vue-study/blob/master/example/addCart.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_6-3-多元素动画"><a href="#_6-3-多元素动画" aria-hidden="true" class="header-anchor">#</a> 6.3 多元素动画</h3> <p>如果遇到<code>v-for</code>就需要<code>transition-group</code>,而且每个元素必须增加key属性
<a href="https://github.com/zhengxif/vue-study/blob/master/example/transition-group.html" target="_blank" rel="noopener noreferrer">https://github.com/zhengxif/vue-study/blob/master/example/transition-group.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="七-vue中的生命周期"><a href="#七-vue中的生命周期" aria-hidden="true" class="header-anchor">#</a> 七.Vue中的生命周期</h2> <ul><li>beforeCreate 在实例初始化之后， 数据观测（date observer）和event/watcher事件配置之前调用</li> <li>created 实例已经创建完成之后被调用。在这一步，实例已经完成以下的配置：数据观测（data observer），属性和方法运算，watch/event事件回调，这里没有$el.</li> <li>beforeMount 在挂载开始之前被调用：相关的 render 函数首次被调用</li> <li>mounted el 被新创建的 vm.$el 替换，并挂载到实例上去之后调用该钩子</li> <li>beforeUpdate 可以在这个钩子中进一步的更新状态，这不会触发重渲染过程。</li> <li>update 可以执行依赖 DOM 的操作。然而在大多数情况下，你应该避免在次期间更新状态，因为这可能导致更新无限循环。该钩子在服务端渲染期间不被调用。</li> <li>destroyed 可以执行一些优化操作，清空定时器，接触绑定事件等</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ n }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>node_modules/vue/dist/vue.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// el: '#app',</span>
        <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 创建之前</span>
            <span class="token comment">// 混和，希望在每个组件中增加一些特定的属性，可以采用这个钩子，基本上业务逻辑是不需要它的</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'before create'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 当前这个组件实例，已经实现了数据劫持，把方法、计算属性也都挂载到了实例，不能获取到真实的dom元素</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'created'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            retuan <span class="token punctuation">{</span> n <span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 这个过程会先渲染子组件</span>
        <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 实例挂载完成，可以拿到vm.$el</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mounted'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 数据将要更新应用到视图上才会触发</span>
        <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'更新之前'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 可以在这里增加一些数据更新，不会导致视图多次更新</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'更新完成'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不要在这里改数据，可能会死循环</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 销毁前, 可以做事件移除，清空定时器操作等优化</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'销毁前'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 手动移除 vm.destroyed(), 路由切换</span>
            <span class="token comment">// 销毁后,移除所有观察者、事件监听</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件销毁后'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// $mount 可以指定一个元素，不指定元素的话，内部会默认渲染到一个内存中的节点</span>
    vm<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 我们可以自己将渲染好的元素插入到自己想放的节点中去</span>
    <span class="token comment">// document.body.appendChild(vm.$el);</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="ValineComment" data-v-032bf4c2><div id="vcomments" data-v-032bf4c2></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/node/koa/" class="prev">
          koa
        </a></span> <span class="next"><a href="/vue/vue-component/">
          Vue组件
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2a43ed40.js" defer></script><script src="/assets/js/2.28999dec.js" defer></script><script src="/assets/js/3.91f2e5c8.js" defer></script><script src="/assets/js/4.f20431e4.js" defer></script>
  </body>
</html>
